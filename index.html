<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word Display</title>
    <style>
      * {
        padding: 0;
        margin: 0;
        color: white;
        font-size: 15px;
        font-family: sans-serif;
        font-weight: bold;
        text-align: center;
        line-height: 1;
      }

      html {
        width: 100%;
        height: 100%;
      }

      body {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #09092d;
      }

      button {
        border: none;
        outline: none;
        cursor: pointer;
        font-size: 1.5rem;
        border-radius: 15%;
      }

      button:active {
        opacity: 0.5;
      }

      #wrapper {
        width: 340px;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      #topNav {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: row;
        margin-top: 10px;
      }

      #topNav > button {
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #4a2ab3;
      }

      #bottomNav {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: row;
        margin-bottom: 10px;
      }

      #bottomNav > button {
        width: 100px;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #4a2ab3;
      }

      #div1,
      #div3 {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex: 1;
        font-size: 3.2rem;
        padding: 20px 0;
      }

      #div1 span {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        font-size: 3.2rem;
      }

      #div3 span {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        font-size: 3.2rem;
      }

      #div2 {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 3.2rem;
      }

      #div2 span {
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 3.2rem;
        background: #4a2ab3;
      }
    </style>
  </head>

  <body>
    <div id="wrapper">
      <div id="topNav">
        <button id="mode1Button">1</button>
        <button id="mode2Button">2</button>
        <button id="mode3Button">3</button>
        <button id="listOfWords">w</button>
      </div>
      <div id="div1"><span></span></div>
      <div id="div2"><span></span></div>
      <div id="div3"><span></span></div>
      <div id="bottomNav">
        <button id="addButton">NO</button>
        <button id="countButton">0</button>
        <button id="nextButton">OK</button>
      </div>
    </div>

    <script>
      const wordsArray = [
        ['be', 'би', 'быть'],
        ['break', 'брэйк', 'разбить'],
        ['bring', 'бринг', 'принести'],
        ['buy', 'бай', 'купить'],
        ['call', 'кол', 'звонить'],
        ['cost', 'кост', 'стоить'],
        ['do', 'ду', 'делать'],
        ['dream', 'дрим', 'мечтать'],
        ['drink', 'дринк', 'пить'],
        ['drive', 'драйв', 'водить'],
        ['eat', 'ит', 'кушать'],
        ['feel', 'фил', 'чувствовать'],
        ['forget', 'фогЭт', 'забыть'],
        ['get', 'гэт', 'получить'],
        ['give', 'гив', 'дать'],
        ['have', 'хэв', 'иметь'],
        ['know', 'нОу', 'знать'],
        ['learn', 'лёрн', 'учиться'],
        ['make', 'мэйк', 'сделать'],
        ['meet', 'мит', 'встретить'],
        ['pay', 'пэй', 'платить'],
        ['play', 'плэй', 'играть'],
        ['put', 'пут', 'класть'],
        ['read', 'рид', 'читать'],
        ['see', 'си', 'видеть'],
        ['sell', 'сэл', 'продать'],
        ['send', 'сэнд', 'слать'],
        ['sleep', 'слип', 'спать'],
        ['speak', 'спик', 'говорить'],
        ['take', 'тэйк', 'брать'],
        ['teach', 'тич', 'учить'],
        ['tell', 'тэл', 'сказать'],
        ['think', 'синк', 'думать'],
        ['try', 'трай', 'стараться'],
        ['write', 'райт', 'писать'],
        ['wait', 'вэйт', 'ждать'],
        ['become', 'бикАм', 'стать'],
        ['begin', 'бигИн', 'начать'],
        ['choose', 'чуз', 'выбрать'],
        ['come', 'кам', 'прийти'],
        ['cut', 'кат', 'резать'],
        ['find', 'файнд', 'найти'],
        ['feed', 'фид', 'кормить'],
        ['fly', 'флай', 'лететь'],
        ['hear', 'хИа', 'слышать'],
        ['hold', 'холд', 'держать'],
        ['keep', 'кип', 'хранить'],
        ['leave', 'лив', 'уйти'],
        ['lie', 'лай', 'лежать'],
        ['run', 'ран', 'бежать'],
        ['show', 'шОу', 'показать'],
        ['sit', 'сит', 'сидеть'],
        ['swim', 'свим', 'плыть'],
        ['tear', 'тИа', 'рвать'],
        ['wake', 'вЭйк', 'проснуться'],
        ['wear', 'вЭа', 'носить'],
        ['win', 'вин', 'выиграть'],
        ['new', 'нью', 'новый'],
        ['now', 'нАу', 'сейчас'],
        ['high', 'хай', 'высокий'],
        ['old', 'олд', 'старый'],
        ['long', 'лонг', 'длинный'],
        ['little', 'литл', 'маленький'],
        ['bad', 'бэд', 'плохой'],
        ['best', 'бэст', 'лучший'],
        ['right', 'райт', 'правильный'],
        ['only', 'Онли', 'только'],
        ['low', 'лОу', 'низкий'],
        ['early', 'Ёрли', 'рано'],
        ['late', 'лЭйт', 'поздно'],
        ['hard', 'хард', 'жесткий'],
        ['strong', 'стронг', 'сильный'],
        ['free', 'фри', 'свободный'],
        ['full', 'фул', 'полный'],
        ['recent', 'рИсэнт', 'недавний'],
        ['open', 'Оупн', 'открыть'],
        ['wrong', 'ронг', 'неправильный'],
        ['similar', 'сИмилар', 'похожий'],
        ['hot', 'хот', 'горячий'],
        ['happy', 'хэпи', 'счастлив'],
        ['ready', 'рЭди', 'готовый'],
        ['dark', 'дарк', 'темный'],
        ['cold', 'колд', 'холодный'],
        ['main', 'мэйн', 'главный'],
        ['huge', 'хьюдж', 'огромный'],
        ['everything', 'Эврисинг', 'всё'],
        ['nothing', 'нАсинг', 'ничего'],
        ['every', 'Эври', 'каждый'],
        ['thing', 'синг', 'вещь'],
        ['all', 'ол', 'все'],
        ['happen', 'хЭпн', 'случиться'],
        ['thread', 'трэд', 'нить'],
        ['item', 'Айтэм', 'предмет'],
        ['slow', 'слОу', 'медленный'],
        ['fast', 'фаст', 'быстро'],
        ['sure', 'шУа', 'конечно'],
        ['already', 'олрЭди', 'уже'],
        ['yet', 'йЕт', 'еще'],
        ['ask', 'аск', 'спросить'],
        ['spend', 'спэнд', 'тратить'],
        ['change', 'чейндж', 'менять'],
        ['move', 'мув', 'двигать'],
        ['enjoy', 'энджОй', 'наслаждаться'],
        ['sometimes', 'самтАймс', 'иногда'],
        ['must', 'маст', 'должен'],
        ['want', 'вОнт', 'хотеть'],
        ['need', 'нид', 'нужно'],
        ['week', 'вик', 'неделя'],
        ['month', 'манс', 'месяц'],
        ['hour', 'Ауэр', 'час'],
        ['price', 'прайс', 'цена'],
        ['agree', 'эгрИ', 'согласиться'],
        ['look for', 'лук фор', 'искать'],
        ['funny', 'фАни', 'забавный'],
        ['fine', 'файн', 'хорошо'],
      ];

      // Create a deep copy of the wordsArray
      const deepCopyArray = JSON.parse(JSON.stringify(wordsArray));

      // Sort the deep copy by the second word in each pair
      deepCopyArray.sort(function (a, b) {
        return a[1].localeCompare(b[1]);
      });

      // Fisher-Yates shuffle algorithm
      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      // Shuffle    the sorted deep copy on page load
      shuffle(deepCopyArray);

      let currentIndex = 0;
      let newIndex = 0;
      let mode = 1;
      let newArray = [];

      // Store references to the elements in variables
      const body = document.querySelector('body');
      const wrapper = document.getElementById('wrapper');
      const topNav = document.getElementById('topNav');
      const div1 = document.querySelector('#div1 span');
      const div2 = document.querySelector('#div2 span');
      const div3 = document.querySelector('#div3 span');
      const div33 = document.querySelector('#div3');
      const bottomNav = document.getElementById('bottomNav');
      const mode1Button = document.getElementById('mode1Button');
      const mode2Button = document.getElementById('mode2Button');
      const mode3Button = document.getElementById('mode3Button');
      const addButton = document.getElementById('addButton');
      const countButton = document.getElementById('countButton');
      const nextButton = document.getElementById('nextButton');

      hideThis(div2);

      function mode1() {
        div1.innerText = deepCopyArray[currentIndex][0];
        div2.innerText = deepCopyArray[currentIndex][2];
        div3.innerText = deepCopyArray[currentIndex][1];
      }

      function newArrayMode() {
        if (newArray.length === 0) {
          console.log('no words yet');
        } else {
          div1.innerText = newArray[newIndex][0];
          div2.innerText = newArray[newIndex][2];
          div3.innerText = newArray[newIndex][1];
        }
      }

      function mode2() {
        div1.innerText = deepCopyArray[currentIndex][2];
        div2.innerText = deepCopyArray[currentIndex][0];
        div3.innerText = deepCopyArray[currentIndex][1];
      }

      function mode3() {
        div1.innerText = deepCopyArray[currentIndex][0].toUpperCase();
        div2.innerText = deepCopyArray[currentIndex][1].toUpperCase();
        div3.innerText = deepCopyArray[currentIndex][2].toUpperCase();
      }

      // ===== NEXT =====
      nextButton.addEventListener('click', function () {
        //
        hideThis(div2);

        if (currentIndex >= deepCopyArray.length) {
          currentIndex = 0; // Reset to cycle through the words again
        }

        if (mode === 1) {
          mode1();
        } else if (mode === 2) {
          mode2();
        } else {
          mode1();
        }

        if (mode === 2) {
          hideThis(div3);
          div1.addEventListener('click', function () {
            showThis(div2);
            showThis(div3);
          });
          div33.addEventListener('click', function () {
            showThis(div2);
            showThis(div3);
          });
        } else {
          showThis(div3);
        }

        nextButton.innerHTML = deepCopyArray.length - currentIndex;

        currentIndex++;
      });

      // ===== COUNT =====
      countButton.addEventListener('click', function () {
        //
        hideThis(div2);

        if (newIndex >= newArray.length) {
          newIndex = 0; // Reset to cycle through the words again
        }

        if (mode === 1) {
          newArrayMode();
        } else {
          newArrayMode();
        }

        newIndex++;
      });

      // ===== ADD =====
      addButton.addEventListener('click', function () {
        //
        newIndex = 0;

        const currentWord =
          deepCopyArray[
            currentIndex > 0 ? currentIndex - 1 : deepCopyArray.length - 1
          ][0];
        if (
          currentIndex > 0 &&
          !newArray.some(function (pair) {
            return pair[0] === currentWord;
          })
        ) {
          newArray.push(deepCopyArray[currentIndex - 1]);
        }

        updateCountButton(); // Update the count button text
        console.log(newArray); // For debugging purposes
      });

      mode1Button.addEventListener('click', function () {
        mode = 1;
        colorMode1();
        clearAll();
        updateCountButton();
      });

      mode2Button.addEventListener('click', function () {
        mode = 2;
        colorMode2();
        clearAll();
        updateCountButton();
      });

      mode3Button.addEventListener('click', function () {
        mode = 3;
      });

      // Show div2 when div1 or div3 is clicked
      div1.addEventListener('click', function () {
        showThis(div2);
      });

      div3.addEventListener('click', function () {
        showThis(div2);
      });

      // hide
      function hideThis(me) {
        me.style.display = 'none';
      }

      // show
      function showThis(me) {
        me.style.display = 'flex';
      }

      function updateCountButton() {
        countButton.innerText = newArray.length;
      }

      // clear everything
      function clearAll() {
        currentIndex = 0;
        newIndex = 0;
        newArray.length = 0;
        div1.innerHTML = '';
        div2.innerHTML = '';
        div3.innerHTML = '';
        nextButton.innerHTML = 'OK';
        hideThis(div2);
      }

      // color scheme mode 1
      function colorMode1() {
        body.style.background = '';
        addButton.style.background = '';
        nextButton.style.background = '';
        countButton.style.background = '';
        mode1Button.style.background = '';
        mode2Button.style.background = '';
        mode3Button.style.background = '';
        div2.style.background = '';
      }

      // color scheme mode 2
      function colorMode2() {
        body.style.background = '#17092d';
        addButton.style.background = '#822ab2';
        nextButton.style.background = '#822ab2';
        countButton.style.background = '#822ab2';
        mode1Button.style.background = '#822ab2';
        mode2Button.style.background = '#822ab2';
        mode3Button.style.background = '#822ab2';
        div2.style.background = '#822ab2';
      }

      /*   function hideTranslation() {
        div2.style.display = 'none';
      } */

      for (let e of deepCopyArray) {
        console.log(e);
      }
    </script>
  </body>
</html>
